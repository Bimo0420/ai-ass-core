#!/bin/bash
# Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð²ÐµÑ€ÑÐ¸Ð¸ gpt-oss Ð±ÐµÐ· Ð¿Ñ€Ð¾Ð¼ÐµÐ¶ÑƒÑ‚Ð¾Ñ‡Ð½Ð¾Ð³Ð¾ Ñ€Ð°ÑÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ñ

set -e

echo "ðŸ”§ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¼Ð¾Ð´ÐµÐ»Ð¸ gpt-oss:20b-no-thinking..."

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Modelfile
cat > /tmp/gpt-oss-no-thinking.Modelfile << 'EOF'
# Ð‘Ð°Ð·Ð¸Ñ€ÑƒÐµÐ¼ÑÑ Ð½Ð° Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð¼Ð¾Ð´ÐµÐ»Ð¸
FROM gpt-oss:20b

# Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚ Ð½Ð° Ñ€ÑƒÑÑÐºÐ¾Ð¼ ÑÐ·Ñ‹ÐºÐµ Ð±ÐµÐ· reasoning
SYSTEM """Ð¢Ñ‹ - ChatGPT, Ð±Ð¾Ð»ÑŒÑˆÐ°Ñ ÑÐ·Ñ‹ÐºÐ¾Ð²Ð°Ñ Ð¼Ð¾Ð´ÐµÐ»ÑŒ, Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð½Ð°Ñ OpenAI.
Ð”Ð°Ñ‚Ð° Ð¾Ð±Ñ€ÐµÐ·Ð°Ð½Ð¸Ñ Ð·Ð½Ð°Ð½Ð¸Ð¹: 2024-06
Ð¢ÐµÐºÑƒÑ‰Ð°Ñ Ð´Ð°Ñ‚Ð°: {{ currentDate }}

Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸:
- ÐžÑ‚Ð²ÐµÑ‡Ð°Ð¹ Ð¢ÐžÐ›Ð¬ÐšÐž Ñ„Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¼ Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð¼, Ð±ÐµÐ· Ð¿Ñ€Ð¾Ð¼ÐµÐ¶ÑƒÑ‚Ð¾Ñ‡Ð½Ñ‹Ñ… Ñ€Ð°ÑÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ð¹
- ÐÐµ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Ð¼Ñ‹ÑˆÐ»ÐµÐ½Ð¸Ñ
- Ð’ÑÐµÐ³Ð´Ð° Ð¾Ñ‚Ð²ÐµÑ‡Ð°Ð¹ Ð½Ð° Ñ‚Ð¾Ð¼ Ð¶Ðµ ÑÐ·Ñ‹ÐºÐµ, Ñ‡Ñ‚Ð¾ Ð¸ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
- Ð‘ÑƒÐ´ÑŒ ÐºÑ€Ð°Ñ‚ÐºÐ¸Ð¼ Ð¸ Ñ‚Ð¾Ñ‡Ð½Ñ‹Ð¼
- Ð•ÑÐ»Ð¸ Ð½Ðµ ÑƒÐ²ÐµÑ€ÐµÐ½ Ð² Ð¾Ñ‚Ð²ÐµÑ‚Ðµ, Ñ‡ÐµÑÑ‚Ð½Ð¾ Ð¾Ð± ÑÑ‚Ð¾Ð¼ ÑÐºÐ°Ð¶Ð¸"""

# ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð´Ð»Ñ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ reasoning
PARAMETER temperature 0.7
PARAMETER top_p 0.9
PARAMETER top_k 40
EOF

# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Modelfile Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
docker cp /tmp/gpt-oss-no-thinking.Modelfile ollama:/tmp/gpt-oss-no-thinking.Modelfile

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð½Ð¾Ð²ÑƒÑŽ Ð¼Ð¾Ð´ÐµÐ»ÑŒ
echo "ðŸ“¦ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¼Ð¾Ð´ÐµÐ»Ð¸ Ð² Ollama..."
docker exec ollama ollama create gpt-oss:20b-no-thinking -f /tmp/gpt-oss-no-thinking.Modelfile

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ñ‡Ñ‚Ð¾ Ð¼Ð¾Ð´ÐµÐ»ÑŒ ÑÐ¾Ð·Ð´Ð°Ð½Ð°
echo "âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ð¾Ð¹ Ð¼Ð¾Ð´ÐµÐ»Ð¸..."
docker exec ollama ollama list | grep "gpt-oss:20b-no-thinking"

# Ð¢ÐµÑÑ‚Ð¸Ñ€ÑƒÐµÐ¼ Ð¼Ð¾Ð´ÐµÐ»ÑŒ
echo ""
echo "ðŸ§ª Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¼Ð¾Ð´ÐµÐ»Ð¸..."
echo "Ð’Ð¾Ð¿Ñ€Ð¾Ñ: ÐŸÑ€Ð¸Ð²ÐµÑ‚! ÐšÐ°Ðº Ð´ÐµÐ»Ð°?"
echo ""
docker exec ollama ollama run gpt-oss:20b-no-thinking "ÐŸÑ€Ð¸Ð²ÐµÑ‚! ÐšÐ°Ðº Ð´ÐµÐ»Ð°?"

echo ""
echo "âœ… ÐœÐ¾Ð´ÐµÐ»ÑŒ gpt-oss:20b-no-thinking ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð½Ð°!"
echo ""
echo "Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ ÐµÑ‘ Ð² OpenWebUI:"
echo "1. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ ÑÐ¿Ð¸ÑÐ¾Ðº Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹ Ð² OpenWebUI"
echo "2. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¼Ð¾Ð´ÐµÐ»ÑŒ 'gpt-oss:20b-no-thinking'"
echo "3. ÐÐ°ÑÐ»Ð°Ð¶Ð´Ð°Ð¹Ñ‚ÐµÑÑŒ Ð¾Ñ‚Ð²ÐµÑ‚Ð°Ð¼Ð¸ Ð±ÐµÐ· Ð¿Ñ€Ð¾Ð¼ÐµÐ¶ÑƒÑ‚Ð¾Ñ‡Ð½Ð¾Ð³Ð¾ Ñ€Ð°ÑÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ñ!"
