# Системные требования

Этот документ описывает минимальные и рекомендуемые требования для развёртывания AI Stack.

---

## 1. Операционная система

### Поддерживаемые ОС

- **Ubuntu**: 22.04 LTS, 24.04 LTS
- **Debian**: 11 (Bullseye), 12 (Bookworm)
- **CentOS Stream** / **Rocky Linux**: 9+ (с оговорками)
- **Другие Linux**: при наличии Docker 24.0+

### Не рекомендуется

- Windows (даже через WSL2) — возможны проблемы с производительностью
- macOS — только для разработки/тестирования

---

## 2. Аппаратные требования

### 2.1. Минимальная конфигурация

Подходит для тестирования, небольших workflow, лёгких LLM моделей:

| Компонент | Минимум |
|-----------|---------|
| **CPU** | 4 ядра (x86_64) |
| **RAM** | 8 GB |
| **Disk** | 50 GB SSD |
| **Network** | 100 Mbps |

**Ограничения:**
- Одновременно можно запустить только несколько лёгких моделей (например, `llama3.2:1b`)
- Мониторинг может работать с задержками
- Не подходит для production с нагрузкой

### 2.2. Рекомендуемая конфигурация

Для production, более тяжёлых моделей, RAG и автоматизации:

| Компонент | Рекомендуется |
|-----------|---------------|
| **CPU** | 8+ ядер (x86_64) |
| **RAM** | 16 GB (лучше 32 GB) |
| **Disk** | 100+ GB NVMe SSD |
| **Network** | 1 Gbps |

**Преимущества:**
- Одновременная работа нескольких средних моделей (7B–13B параметров)
- Быстрое выполнение RAG пайплайнов
- Стабильная работа мониторинга и трейсинга

### 2.3. Конфигурация с GPU (опционально)

Для ускорения inference больших моделей (13B+):

| Компонент | Требования |
|-----------|------------|
| **GPU** | NVIDIA с поддержкой CUDA 12.0+ |
| **VRAM** | 8+ GB (рекомендуется 16+ GB для моделей 13B+) |
| **Драйверы** | Актуальные NVIDIA drivers |
| **Toolkit** | nvidia-container-toolkit установлен |

**Примеры подходящих GPU:**
- NVIDIA RTX 3060 (12 GB VRAM)
- NVIDIA RTX 4070 (12 GB VRAM)
- NVIDIA RTX A4000 (16 GB VRAM)
- NVIDIA A100 (40 GB / 80 GB VRAM) — для enterprise

---

## 3. Программное обеспечение

### 3.1. Обязательные зависимости

| ПО | Минимальная версия | Проверка |
|----|-------------------|----------|
| **Docker** | 24.0+ | `docker --version` |
| **Docker Compose** | 2.20+ | `docker compose version` |
| **Git** | любая | `git --version` |
| **Curl** | любая | `curl --version` |

### 3.2. Дополнительные утилиты (рекомендуется)

- `htop` — мониторинг системных ресурсов
- `ncdu` — анализ дискового пространства
- `fail2ban` — защита от брутфорса SSH
- `ufw` или `iptables` — управление firewall

Установка:

```

sudo apt update
sudo apt install -y htop ncdu fail2ban ufw

```

---

## 4. Сетевые требования

### 4.1. Порты

Должны быть свободны и доступны извне:

| Порт | Назначение |
|------|------------|
| **80** | HTTP (редирект на HTTPS) |
| **443** | HTTPS (Traefik) |
| **22** | SSH (для администрирования) |

### 4.2. Доменное имя

- Зарегистрированный домен с возможностью управления DNS
- **Рекомендуется:** Cloudflare (для автоматического SSL через DNS-01 challenge)
- **Альтернатива:** любой DNS-провайдер с поддержкой ACME DNS challenges

### 4.3. Исходящие соединения

- Доступ к Docker Hub, GitHub, Cloudflare API
- Доступ к репозиториям пакетов ОС (apt, yum)
- Ollama может загружать модели с ollama.ai

---

## 5. Облачные провайдеры

### 5.1. Рекомендуемые

Проверено на:

- **Hetzner Cloud** — хорошая цена/производительность
- **DigitalOcean** — простота настройки
- **AWS EC2** — гибкость, поддержка GPU (g4dn, p3)
- **Google Cloud Compute Engine** — аналогично AWS
- **Azure** — корпоративные решения

### 5.2. Минимальные рекомендованные инстансы

| Провайдер | Тип инстанса | vCPU | RAM | Диск |
|-----------|--------------|------|-----|------|
| Hetzner | CPX31 | 4 | 8 GB | 160 GB |
| DigitalOcean | Droplet 8GB | 4 | 8 GB | 160 GB SSD |
| AWS | t3.large | 2 | 8 GB | + EBS 100 GB |
| GCP | n1-standard-2 | 2 | 7.5 GB | + disk 100 GB |

Для GPU:
- **AWS**: g4dn.xlarge (1x NVIDIA T4, 16 GB VRAM)
- **GCP**: n1-standard-4 + 1x T4

---

## 6. Дисковое пространство

### Распределение по компонентам (примерное)

| Компонент | Приблизительный размер |
|-----------|------------------------|
| **Docker images** | 10–15 GB |
| **PostgreSQL data** | 2–5 GB (зависит от workflow) |
| **Ollama models** | 5–20 GB на модель (зависит от размера) |
| **n8n workflows** | 1–2 GB |
| **Grafana, Prometheus** | 1–3 GB |
| **Логи** | 1–5 GB (ротируются) |
| **Резервные копии** | зависит от частоты |

**Итого:** 50–100 GB минимум, рекомендуется 100+ GB.

---

## 7. Ресурсы при работе

### Ожидаемое потребление RAM (примерное)

| Сервис | RAM |
|--------|-----|
| Traefik | ~50 MB |
| PostgreSQL | 200–500 MB |
| Redis | ~50 MB |
| n8n | 300–500 MB |
| Ollama (idle) | ~200 MB |
| Ollama (inference 7B) | 4–8 GB |
| Open WebUI | 100–200 MB |
| Grafana | 100–200 MB |
| Prometheus | 200–500 MB |
| Langfuse | 200–400 MB |
| Supabase stack | 1–2 GB |

**Общий минимум (все сервисы):** 6–8 GB  
**С запущенной моделью 7B:** 10–16 GB

### CPU

- Traefik, Grafana, Prometheus — минимальная нагрузка
- PostgreSQL, Redis — низкая/средняя нагрузка
- Ollama inference — высокая нагрузка (зависит от модели и частоты запросов)

---

## 8. Безопасность и доступ

### SSH

- Доступ по SSH с использованием ключей (не паролей)
- Настроенный firewall (ufw/iptables)
- fail2ban для защиты от брутфорса

### Cloudflare

- Аккаунт с зарегистрированным доменом
- API Token с правами `Zone:DNS:Edit`

### Резервное копирование

- Достаточно места для хранения бэкапов (или внешний storage)
- Настроенные cron задачи для автоматических бэкапов

---

## 9. Чек-лист перед установкой

- [ ] ОС: Ubuntu 22.04+ / Debian 12+
- [ ] CPU: 4+ ядра
- [ ] RAM: 8+ GB (лучше 16+ GB)
- [ ] Disk: 50+ GB SSD (лучше 100+ GB NVMe)
- [ ] Docker 24.0+ установлен
- [ ] Docker Compose 2.20+ установлен
- [ ] Порты 80, 443 открыты и свободны
- [ ] Домен зарегистрирован, DNS настроен на сервер
- [ ] Cloudflare API token получен
- [ ] SSH доступ с ключами настроен
- [ ] Firewall настроен (ufw/iptables)
- [ ] (Опционально) GPU драйверы и nvidia-container-toolkit установлены

---

## 10. Следующие шаги

После проверки требований:
- [Установка](installation.md)
- [Конфигурация](configuration.md)
- [Быстрый старт](quickstart.md)
```