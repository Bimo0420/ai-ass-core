# –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –£–ª—É—á—à–µ–Ω–∏—é –û—Ç–≤–µ—Ç–æ–≤ AI-RAG –ê–≥–µ–Ω—Ç–∞

## üìã –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤ AI-RAG –∞–≥–µ–Ω—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –¥–≤—É—Ö workflow:
- **AI Local Agent (LlamaIndex)** ‚Äî —Å –≥–∏–±—Ä–∏–¥–Ω—ã–º –ø–æ–∏—Å–∫–æ–º –∏ reranking
- **AI Local Agent (Supabase)** ‚Äî —Å —á–∏—Å—Ç—ã–º —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–∏—Å–∫–æ–º

–û–±–∞ workflow –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å OpenWebUI —á–µ—Ä–µ–∑ –º–æ–¥–µ–ª—å "AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç (Clone)".

---

## üéØ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –£–ª—É—á—à–µ–Ω–∏—è (–í—ã—Å—à–∏–π –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

### 1. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ Context Window Length

**–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```json
"contextWindowLength": 1
```

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ê–≥–µ–Ω—Ç "–ø–æ–º–Ω–∏—Ç" —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫:
- –ü–æ—Ç–µ—Ä–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ –º–Ω–æ–≥–æ—Ö–æ–¥–æ–≤—ã—Ö –¥–∏–∞–ª–æ–≥–∞—Ö
- –ù–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–º –ø–æ–∏—Å–∫–∞–º –ø–æ –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ —Ç–µ–º–µ

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
```json
"contextWindowLength": 5
```

–î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:
```json
"contextWindowLength": 10
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- +30-50% —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –≤ –º–Ω–æ–≥–æ—Ö–æ–¥–æ–≤—ã—Ö –¥–∏–∞–ª–æ–≥–∞—Ö
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

### 2. –£–ª—É—á—à–µ–Ω–∏–µ Tool Description

**–¢–µ–∫—É—â–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è:**

*LlamaIndex:*
> "–ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π"

*Supabase:*
> "–ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–Ω–∞–Ω–∏–π –ø–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –≤–æ–ø—Ä–æ—Å–∞–º"

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –°–ª–∏—à–∫–æ–º –æ–±—â–∏–µ
- –ù–µ —É–∫–∞–∑—ã–≤–∞—é—Ç –∫–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
- –ù–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—Ä–∏–º–µ—Ä–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç:**

```
–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –∫–æ–º–ø–∞–Ω–∏–∏ [–ù–∞–∑–≤–∞–Ω–∏–µ].

–ò–°–ü–û–õ–¨–ó–£–ô —ç—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–≥–¥–∞:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö, —É—Å–ª—É–≥–∞—Ö –∏–ª–∏ —Ü–µ–Ω–∞—Ö
- –ù—É–∂–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö –∏ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞—Ö
- –í–æ–ø—Ä–æ—Å –∫–∞—Å–∞–µ—Ç—Å—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –ù–µ–æ–±—Ö–æ–¥–∏–º—ã –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –∫–æ–º–ø–∞–Ω–∏–∏

–ù–ï –ò–°–ü–û–õ–¨–ó–£–ô —ç—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–≥–¥–∞:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å—Ç–æ –∑–¥–æ—Ä–æ–≤–∞–µ—Ç—Å—è
- –í–æ–ø—Ä–æ—Å –æ–±—â–∏–π (–ø–æ–≥–æ–¥–∞, –≤—Ä–µ–º—è, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –ø–æ–ª—É—á–∏–ª –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç
- –í–æ–ø—Ä–æ—Å –æ —Ç–µ–±–µ –∫–∞–∫ –æ–± –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–µ

–§–û–†–ú–ê–¢ –ó–ê–ü–†–û–°–ê:
–°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ.
–ü—Ä–∏–º–µ—Ä: "—É—Å–ª–æ–≤–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ç–æ–≤–∞—Ä–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ 14 –¥–Ω–µ–π"
–ù–ï: "—Ä–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ –≤–æ–∑–≤—Ä–∞—Ç"
```

---

### 3. –°–∏—Å—Ç–µ–º–Ω—ã–π –ü—Ä–æ–º–ø—Ç –¥–ª—è RAG-–ê–≥–µ–Ω—Ç–∞

–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç OpenWebUI (–∏–ª–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ `systemPrompt`):

```markdown
# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

## –¢–≤–æ—è –†–æ–ª—å
–¢—ã ‚Äî –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –∫–æ–º–ø–∞–Ω–∏–∏ [–ù–∞–∑–≤–∞–Ω–∏–µ]. –¢–≤–æ—è –≥–ª–∞–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ ‚Äî 
–¥–∞–≤–∞—Ç—å —Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π.

## –ü—Ä–∞–≤–∏–ª–∞ –†–∞–±–æ—Ç—ã —Å –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π –±–∞–∑—É –∑–Ω–∞–Ω–∏–π** –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –æ –∫–æ–º–ø–∞–Ω–∏–∏, –ø—Ä–æ–¥—É–∫—Ç–∞—Ö, —É—Å–ª—É–≥–∞—Ö
2. **–¶–∏—Ç–∏—Ä—É–π –∏—Å—Ç–æ—á–Ω–∏–∫–∏** –∫–æ–≥–¥–∞ —ç—Ç–æ —É–º–µ—Å—Ç–Ω–æ
3. **–ï—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞**, —á–µ—Å—Ç–Ω–æ —Å–æ–æ–±—â–∏: 
   "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É. –†–µ–∫–æ–º–µ–Ω–¥—É—é –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ [–∫–æ–º—É]."
4. **–ù–µ –≤—ã–¥—É–º—ã–≤–∞–π —Ñ–∞–∫—Ç—ã** ‚Äî –ª—É—á—à–µ –ø—Ä–∏–∑–Ω–∞—Ç—å –Ω–µ–∑–Ω–∞–Ω–∏–µ

## –§–æ—Ä–º–∞—Ç –û—Ç–≤–µ—Ç–æ–≤

- –û—Ç–≤–µ—á–∞–π **–∫—Ä–∞—Ç–∫–æ –∏ –ø–æ —Å—É—â–µ—Å—Ç–≤—É**
- –ò—Å–ø–æ–ª—å–∑—É–π **—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç** (—Å–ø–∏—Å–∫–∏, –ø—É–Ω–∫—Ç—ã) –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- –Ø–∑—ã–∫ –æ—Ç–≤–µ—Ç–∞ = —è–∑—ã–∫ –≤–æ–ø—Ä–æ—Å–∞ (–æ–±—ã—á–Ω–æ —Ä—É—Å—Å–∫–∏–π)
- –ò–∑–±–µ–≥–∞–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∂–∞—Ä–≥–æ–Ω–∞, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç

## –û—Å–æ–±—ã–µ –°–ª—É—á–∞–∏

- –ü—Ä–∏ –Ω–µ—è—Å–Ω–æ–º –≤–æ–ø—Ä–æ—Å–µ ‚Äî **—É—Ç–æ—á–Ω–∏** –ø–µ—Ä–µ–¥ –ø–æ–∏—Å–∫–æ–º
- –ü—Ä–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è—Ö ‚Äî —Å–ø—Ä–æ—Å–∏ –æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
- –ü—Ä–∏ –¥–ª–∏–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö ‚Äî –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å **—Ä–µ–∑—é–º–µ** —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –£–ª—É—á—à–µ–Ω–∏—è (–°—Ä–µ–¥–Ω–∏–π –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ü–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ì–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ü–æ–∏—Å–∫–∞ (LlamaIndex)

**–¢–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```json
{
  "match_count": 40,
  "top_k": 5,
  "full_text_weight": 3.0,
  "semantic_weight": 1.0,
  "use_reranking": true
}
```

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**

#### A) –î–ª—è FAQ-—Å—Ç–∏–ª—è (–∫–æ—Ä–æ—Ç–∫–∏–µ —Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã):
```json
{
  "match_count": 30,
  "top_k": 3,
  "full_text_weight": 2.5,
  "semantic_weight": 1.0,
  "use_reranking": true
}
```

#### B) –î–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (—Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã):
```json
{
  "match_count": 60,
  "top_k": 7,
  "full_text_weight": 2.0,
  "semantic_weight": 1.5,
  "use_reranking": true
}
```

#### C) –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π):
–î–æ–±–∞–≤–∏—Ç—å logic-—É–∑–µ–ª –ø–µ—Ä–µ–¥ HTTP Tool –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞:

```javascript
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–∞
const query = $json.query.toLowerCase();

const isFAQ = /–∫–∞–∫|—á—Ç–æ —Ç–∞–∫–æ–µ|–ø–æ—á–µ–º—É|–∑–∞—á–µ–º|–∫–æ–≥–¥–∞|–≥–¥–µ/.test(query);
const isDeepResearch = /–ø–æ–¥—Ä–æ–±–Ω|–¥–µ—Ç–∞–ª—å–Ω|–≤—Å–µ –æ|–ø–æ–ª–Ω|–¥–æ–∫—É–º–µ–Ω—Ç/.test(query);

let params = {
  match_count: isFAQ ? 30 : 50,
  top_k: isDeepResearch ? 7 : 4,
  full_text_weight: isFAQ ? 2.5 : 2.0,
  semantic_weight: 1.0,
  use_reranking: true
};

return { json: params };
```

---

### 5. –£–ª—É—á—à–µ–Ω–∏–µ Clean Output Node

**–¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ Chain-of-Thought –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- –ú–æ–∂–µ—Ç —Å–ª—É—á–∞–π–Ω–æ –æ–±—Ä–µ–∑–∞—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∫ JavaScript:**

```javascript
// –î–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞ residualPatterns:
const residualPatterns = [
  // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã...
  
  // –ù–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
  /Let me think\.*?(?=(?:[–ê-–Ø–∞-—è]|\n\n))/gis,
  /I need to\.*?(?=(?:[–ê-–Ø–∞-—è]|\n\n))/gis,
  /First,?\s*I\s*(?:will|should|need)\.*?(?=(?:[–ê-–Ø–∞-—è]|\n\n))/gis,
  /Based on the (context|documents?|information)\s*[:,]?\s*/gi,
  /According to the (provided )?(context|documents?|knowledge)\s*[:,]?\s*/gi,
  /The (context|documents?|search results?) (shows?|indicates?|mentions?)\.*?(?=(?:[–ê-–Ø–∞-—è]))/gi,
  /\[?No relevant information found\.?\]?/gi,
  /I couldn't find\.*?(?=(?:[–ê-–Ø–∞-—è]|\n\n|$))/gis,
  
  // –£–¥–∞–ª–µ–Ω–∏–µ markdown-–∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
  /```json[\s\S]*?```/g,
  /```[\s\S]*?```/g, // –ï—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω –∫–æ–¥ –≤ –æ—Ç–≤–µ—Ç–µ
];

// –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
if (!text || text.length < 20 || !/[–ê-–Ø–∞-—è–Å—ë]/.test(text)) {
  text = "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π. " +
         "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É.";
}
```

---

### 6. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Fallback –ø—Ä–∏ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–î–æ–±–∞–≤–∏—Ç—å IF-—É–∑–µ–ª –ø–æ—Å–ª–µ AI Agent:

```javascript
// –£—Å–ª–æ–≤–∏–µ –¥–ª—è IF-—É–∑–ª–∞
const output = $json.output;

const noResultsIndicators = [
  '–Ω–µ –Ω–∞–π–¥–µ–Ω–∞',
  '–Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏',
  '–Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç',
  'I couldn\'t find',
  'no information',
  'I don\'t have'
];

const hasNoResults = noResultsIndicators.some(indicator => 
  output.toLowerCase().includes(indicator.toLowerCase())
);

return hasNoResults;
```

**True branch:** –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
**False branch:** –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π flow

---

## üìä –£–ª—É—á—à–µ–Ω–∏—è –ö–∞—á–µ—Å—Ç–≤–∞ –î–∞–Ω–Ω—ã—Ö

### 7. –ö–∞—á–µ—Å—Ç–≤–æ –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –î–æ–∫—É–º–µ–Ω—Ç–æ–≤

#### A) –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:

```markdown
## –ß–µ–∫-–ª–∏—Å—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è RAG

- [ ] –£–¥–∞–ª–µ–Ω—ã –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã (–Ω–∞–≤–∏–≥–∞—Ü–∏—è, —Ñ—É—Ç–µ—Ä—ã, —Ä–µ–∫–ª–∞–º–Ω—ã–µ –±–ª–æ–∫–∏)
- [ ] –î–æ–∫—É–º–µ–Ω—Ç—ã —Ä–∞–∑–±–∏—Ç—ã –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —á–∞–Ω–∫–∏ (500-1000 —Ç–æ–∫–µ–Ω–æ–≤)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã metadata (–∫–∞—Ç–µ–≥–æ—Ä–∏—è, –¥–∞—Ç–∞, –∞–≤—Ç–æ—Ä, —Ç—ç–≥–∏)
- [ ] –ó–∞–≥–æ–ª–æ–≤–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã –≤ —á–∞–Ω–∫–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∞ (UTF-8)
- [ ] –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã
```

#### B) –°—Ç—Ä–∞—Ç–µ–≥–∏—è —á–∞–Ω–∫–æ–≤–∞–Ω–∏—è:

| –¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ | –°—Ç—Ä–∞—Ç–µ–≥–∏—è | –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ |
|--------------|-----------|--------------|
| FAQ | –ü–æ –≤–æ–ø—Ä–æ—Å—É-–æ—Ç–≤–µ—Ç—É | 200-400 —Ç–æ–∫–µ–Ω–æ–≤ |
| –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ | –ü–æ —à–∞–≥–∞–º/—Ä–∞–∑–¥–µ–ª–∞–º | 400-600 —Ç–æ–∫–µ–Ω–æ–≤ |
| –°—Ç–∞—Ç—å–∏ | –° overlap 20% | 600-1000 —Ç–æ–∫–µ–Ω–æ–≤ |
| –¢–∞–±–ª–∏—Ü—ã | –°—Ç—Ä–æ–∫–∞ + –∑–∞–≥–æ–ª–æ–≤–∫–∏ | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã |

#### C) Metadata –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:

```json
{
  "content": "–¢–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞...",
  "metadata": {
    "source": "faq_products.md",
    "category": "products",
    "subcategory": "pricing",
    "language": "ru",
    "last_updated": "2026-01-01",
    "importance": "high",
    "keywords": ["—Ü–µ–Ω–∞", "—Å—Ç–æ–∏–º–æ—Å—Ç—å", "—Ç–∞—Ä–∏—Ñ"]
  }
}
```

---

### 8. –í—ã–±–æ—Ä Embedding –ú–æ–¥–µ–ª–∏

**–¢–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å (Supabase workflow):** `nomic-embed-text:latest`

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞:**

| –ú–æ–¥–µ–ª—å | –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å | –ö–∞—á–µ—Å—Ç–≤–æ RU | –°–∫–æ—Ä–æ—Å—Ç—å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|--------|-------------|-------------|----------|--------------|
| nomic-embed-text | 768 | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | –¢–µ–∫—É—â–∏–π –≤—ã–±–æ—Ä |
| multilingual-e5-large | 1024 | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | –õ—É—á—à–µ –¥–ª—è RU |
| bge-m3 | 1024 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | –õ—É—á—à–∏–π –¥–ª—è RU |
| mxbai-embed-large | 1024 | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | –•–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**  
–î–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `bge-m3` –∏–ª–∏ `multilingual-e5-large`.

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ Ollama
ollama pull mxbai-embed-large
```

---

## üöÄ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –£–ª—É—á—à–µ–Ω–∏—è (–ù–∏–∑–∫–∏–π –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

### 9. Query Rewriting (–ü–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ó–∞–ø—Ä–æ—Å–æ–≤)

–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π LLM-–≤—ã–∑–æ–≤ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:

```javascript
// –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥ Hybrid Search Tool
const originalQuery = $json.body.currentMessage;

// –ü—Ä–æ–º–ø—Ç –¥–ª—è –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è
const rewritePrompt = `
–ü–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π.
–°–æ—Ö—Ä–∞–Ω–∏ —Å–º—ã—Å–ª, –Ω–æ —Å–¥–µ–ª–∞–π –∑–∞–ø—Ä–æ—Å –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∏ –¥–æ–±–∞–≤—å –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞.

–ò—Å—Ö–æ–¥–Ω—ã–π –≤–æ–ø—Ä–æ—Å: "${originalQuery}"

–ü—Ä–∞–≤–∏–ª–∞:
- –†–∞—Å—à–∏—Ä—å –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã –µ—Å–ª–∏ –∑–Ω–∞–µ—à—å –∏—Ö
- –î–æ–±–∞–≤—å —Å–∏–Ω–æ–Ω–∏–º—ã –∫–ª—é—á–µ–≤—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤
- –£–±–µ—Ä–∏ –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è, –∑–∞–º–µ–Ω–∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è
- –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

–ü–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å:
`;

return { json: { rewritePrompt } };
```

---

### 10. Multi-Query Retrieval

–î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:

```javascript
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞—Å–ø–µ–∫—Ç–æ–≤ –≤–æ–ø—Ä–æ—Å–∞
const multiQueryPrompt = `
–†–∞–∑–±–µ–π —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ 3 –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–∞,
–∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–π –∞—Å–ø–µ–∫—Ç –≤–æ–ø—Ä–æ—Å–∞.

–í–æ–ø—Ä–æ—Å: "${userQuery}"

–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (—Ç–æ–ª—å–∫–æ JSON):
["–∑–∞–ø—Ä–æ—Å1", "–∑–∞–ø—Ä–æ—Å2", "–∑–∞–ø—Ä–æ—Å3"]
`;
```

–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫ –ø–æ –∫–∞–∂–¥–æ–º—É –∑–∞–ø—Ä–æ—Å—É –∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.

---

### 11. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ß–∞—Å—Ç—ã—Ö –ó–∞–ø—Ä–æ—Å–æ–≤

–î–æ–±–∞–≤–∏—Ç—å Redis/PostgreSQL –∫—ç—à –¥–ª—è:
- –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ embeddings (–∫–ª—é—á = hash(query))
- –ß–∞—Å—Ç—ã—Ö –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ü–æ–ª–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ —Ç–∏–ø–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

```javascript
// –ü—Å–µ–≤–¥–æ–∫–æ–¥ –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
const cacheKey = crypto.createHash('md5').update(query).digest('hex');
const cached = await redis.get(cacheKey);

if (cached && Date.now() - cached.timestamp < 3600000) {
  return cached.response;
}

// ... –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫ ...

await redis.set(cacheKey, { response, timestamp: Date.now() });
```

---

### 12. Feedback Loop (–û–±—Ä–∞—Ç–Ω–∞—è –°–≤—è–∑—å)

–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º —Å–±–æ—Ä–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏:

```javascript
// –ü–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –¥–æ–±–∞–≤–∏—Ç—å inline buttons
const responseWithFeedback = {
  text: cleanedResponse,
  feedback_buttons: [
    { id: 'helpful', label: 'üëç –ü–æ–ª–µ–∑–Ω–æ' },
    { id: 'not_helpful', label: 'üëé –ù–µ –ø–æ–º–æ–≥–ª–æ' },
    { id: 'incorrect', label: '‚ùå –ù–µ–≤–µ—Ä–Ω–æ' }
  ]
};

// Webhook –¥–ª—è —Å–±–æ—Ä–∞ feedback
// POST /feedback { message_id, rating, comment? }
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è:
- Fine-tuning —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
- –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

| –ú–µ—Ç—Ä–∏–∫–∞ | –ö–∞–∫ –∏–∑–º–µ—Ä–∏—Ç—å | –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|--------------|-----------------|
| Tool Call Rate | % –≤—ã–∑–æ–≤–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –ø–æ–∏—Å–∫–∞ | 70-90% |
| "–ù–µ –Ω–∞–π–¥–µ–Ω–æ" Rate | % –æ—Ç–≤–µ—Ç–æ–≤ –±–µ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ | < 15% |
| Response Latency P95 | 95-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ | < 5s |
| User Satisfaction | Thumbs up / total feedback | > 80% |
| Context Relevance | Manual review sample | > 85% |
| Answer Accuracy | Expert review sample | > 90% |

---

## üîÑ –ü–ª–∞–Ω –í–Ω–µ–¥—Ä–µ–Ω–∏—è –£–ª—É—á—à–µ–Ω–∏–π

### –§–∞–∑–∞ 1 (1-2 –¥–Ω—è) ‚Äî Quick Wins:
1. ‚úÖ –£–≤–µ–ª–∏—á–∏—Ç—å contextWindowLength –¥–æ 5
2. ‚úÖ –£–ª—É—á—à–∏—Ç—å Tool Description
3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å Clean Output patterns

### –§–∞–∑–∞ 2 (3-5 –¥–Ω–µ–π) ‚Äî –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞
5. –î–æ–±–∞–≤–∏—Ç—å fallback handling
6. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ embedding –º–æ–¥–µ–ª–∏

### –§–∞–∑–∞ 3 (1-2 –Ω–µ–¥–µ–ª–∏) ‚Äî –ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö:
7. –†–µ–≤–∏–∑–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
8. –î–æ–±–∞–≤–∏—Ç—å metadata
9. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–∞–Ω–∫–æ–≤–∞–Ω–∏–µ

### –§–∞–∑–∞ 4 (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
10. Query rewriting
11. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
12. Feedback collection

---

## üìé –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### A. –¢–µ—Å—Ç–æ–≤—ã–µ –°—Ü–µ–Ω–∞—Ä–∏–∏

```markdown
## –¢–µ—Å—Ç-–∫–µ–π—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π

1. **–ü—Ä–æ—Å—Ç–æ–π FAQ:** "–ö–∞–∫–æ–π –≥—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã –æ—Ñ–∏—Å–∞?"
   - –û–∂–∏–¥–∞–Ω–∏–µ: –¢–æ—á–Ω—ã–π –æ—Ç–≤–µ—Ç –∏–∑ FAQ

2. **–¢–æ—á–Ω—ã–π —Ç–µ—Ä–º–∏–Ω:** "–£—Å–ª–æ–≤–∏—è —Ç–∞—Ä–∏—Ñ–∞ –ü—Ä–µ–º–∏—É–º+"
   - –û–∂–∏–¥–∞–Ω–∏–µ: –ù–∞–π—Ç–∏ –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É

3. **–ú–Ω–æ–≥–æ—Ö–æ–¥–æ–≤—ã–π –¥–∏–∞–ª–æ–≥:**
   - "–†–∞—Å—Å–∫–∞–∂–∏ –æ –≤–æ–∑–≤—Ä–∞—Ç–µ —Ç–æ–≤–∞—Ä–∞"
   - "–ê –µ—Å–ª–∏ —Ç–æ–≤–∞—Ä –±—ã–ª –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏?"
   - "–ö–∞–∫–∏–µ —Å—Ä–æ–∫–∏?"
   - –û–∂–∏–¥–∞–Ω–∏–µ: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

4. **–ó–∞–ø—Ä–æ—Å –≤–Ω–µ –±–∞–∑—ã:** "–ö–∞–∫–∞—è —Å–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–¥–∞?"
   - –û–∂–∏–¥–∞–Ω–∏–µ: –ù–ï –≤—ã–∑—ã–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–∏—Å–∫–∞

5. **–ù–µ—è—Å–Ω—ã–π –∑–∞–ø—Ä–æ—Å:** "–∞ –∫–∞–∫ —Ç–∞–º —Å —ç—Ç–∏–º?"
   - –û–∂–∏–¥–∞–Ω–∏–µ: –£—Ç–æ—á–Ω—è—é—â–∏–π –≤–æ–ø—Ä–æ—Å
```

### B. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Dashboard (Langfuse)

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –≤–∏–¥–∂–µ—Ç—ã:
- Latency breakdown –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º
- Tool usage heatmap
- Error rate trend
- Token usage (input/output) distribution

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 2026-01-13*  
*–í–µ—Ä—Å–∏—è: 1.0*  
*–ê–≤—Ç–æ—Ä: AI Analysis Agent*
