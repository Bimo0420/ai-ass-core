# üîç –ê–Ω–∞–ª–∏–∑ AI-—Å—Ç–µ–∫–∞: –û—Ç –∑–∞–ø—Ä–æ—Å–∞ –¥–æ –æ—Ç–≤–µ—Ç–∞

> **–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2026-01-05  
> **–í–µ—Ä—Å–∏—è —Å—Ç–µ–∫–∞:** CPU-only deployment  
> **–ê–≤—Ç–æ—Ä:** AI Infrastructure Analysis

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#–æ–±–∑–æ—Ä-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
2. [–ü–æ—Ç–æ–∫ –∑–∞–ø—Ä–æ—Å–∞: –ø–æ—à–∞–≥–æ–≤—ã–π —Ä–∞–∑–±–æ—Ä](#–ø–æ—Ç–æ–∫-–∑–∞–ø—Ä–æ—Å–∞-–ø–æ—à–∞–≥–æ–≤—ã–π-—Ä–∞–∑–±–æ—Ä)
3. [–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤](#–¥–µ—Ç–∞–ª—å–Ω–æ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ-—Å–µ—Ä–≤–∏—Å–æ–≤)
4. [–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
5. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-—É–ª—É—á—à–µ–Ω–∏—é)
6. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)

---

## üèó –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```
                                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                    ‚îÇ                         INTERNET                             ‚îÇ
                                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                                      ‚îÇ
                                                                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                         TRAEFIK (Reverse Proxy)                                              ‚îÇ
‚îÇ                                   SSL/TLS Termination + Load Balancing                                       ‚îÇ
‚îÇ                                      –ü–æ—Ä—Ç—ã: 80 (HTTP) ‚Üí 443 (HTTPS)                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ                             ‚îÇ                             ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   openwebui.domain    ‚îÇ     ‚îÇ     n8n.domain        ‚îÇ     ‚îÇ   langfuse.domain     ‚îÇ
    ‚îÇ                       ‚îÇ     ‚îÇ                       ‚îÇ     ‚îÇ                       ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ                             ‚îÇ                             ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         OPEN WEBUI          ‚îÇ  ‚îÇ           n8n           ‚îÇ  ‚îÇ         LANGFUSE          ‚îÇ
‚îÇ     (Chat Interface)        ‚îÇ  ‚îÇ    (Automation Hub)     ‚îÇ  ‚îÇ       (LLM Tracing)       ‚îÇ
‚îÇ       Port: 8080            ‚îÇ  ‚îÇ       Port: 5678        ‚îÇ  ‚îÇ        Port: 3000         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ                               ‚îÇ                             ‚ñ≤
              ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                             ‚îÇ
              ‚îÇ    ‚îÇ                                                        ‚îÇ
              ‚ñº    ‚ñº                                                        ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ        PIPELINES        ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ    LANGFUSE WORKER        ‚îÇ
    ‚îÇ   (Filter/Middleware)   ‚îÇ       –¢—Ä–µ–π—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã–µ         ‚îÇ  (Background Processing)  ‚îÇ
    ‚îÇ       Port: 9099        ‚îÇ                               ‚îÇ                           ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ                                                         ‚îÇ
                  ‚ñº                                                         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                            ‚îÇ
    ‚îÇ         OLLAMA          ‚îÇ                                            ‚îÇ
    ‚îÇ    (LLM Inference)      ‚îÇ                                            ‚îÇ
    ‚îÇ       Port: 11434       ‚îÇ                                            ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                            ‚îÇ
                                                                            ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                       DATA LAYER                          ‚îÇ                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ   POSTGRESQL    ‚îÇ  ‚îÇ      REDIS      ‚îÇ  ‚îÇ    CLICKHOUSE    ‚îÇ  ‚îÇ      MINIO      ‚îÇ  ‚îÇ    SUPABASE    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  (Main Database)‚îÇ  ‚îÇ (Queue/Cache)   ‚îÇ  ‚îÇ  (Analytics DB)  ‚îÇ  ‚îÇ   (S3 Storage)  ‚îÇ  ‚îÇ   (Vector DB)  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ   Port: 5432    ‚îÇ  ‚îÇ   Port: 6379    ‚îÇ  ‚îÇ   Port: 8123     ‚îÇ  ‚îÇ   Port: 9000    ‚îÇ  ‚îÇ   Port: 8000   ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîÑ –ü–æ—Ç–æ–∫ –∑–∞–ø—Ä–æ—Å–∞: –ø–æ—à–∞–≥–æ–≤—ã–π —Ä–∞–∑–±–æ—Ä

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç Open WebUI

---

### **–≠—Ç–∞–ø 1: –ö–ª–∏–µ–Ω—Ç ‚Üí Traefik**

```
[Browser] ‚îÄ‚îÄHTTPS‚îÄ‚îÄ‚ñ∂ [Traefik:443]
         Host: openwebui.askrobotgetanswer.ru
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç `https://openwebui.askrobotgetanswer.ru` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. DNS —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Cloudflare ‚Üí IP —Å–µ—Ä–≤–µ—Ä–∞
3. Traefik –ø—Ä–∏–Ω–∏–º–∞–µ—Ç HTTPS –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ—Ä—Ç—É 443
4. SSL/TLS —Ç–µ—Ä–º–∏–Ω–∞—Ü–∏—è (—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç Let's Encrypt)
5. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ –ø—Ä–∞–≤–∏–ª—É `Host(`openwebui.${DOMAIN}`)`

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Traefik:**
```yaml
labels:
  - "traefik.http.routers.openwebui.rule=Host(`openwebui.${DOMAIN}`)"
  - "traefik.http.routers.openwebui.entrypoints=websecure"
  - "traefik.http.routers.openwebui.tls.certresolver=letsencrypt"
  - "traefik.http.services.openwebui.loadbalancer.server.port=8080"
```

---

### **–≠—Ç–∞–ø 2: Traefik ‚Üí Open WebUI**

```
[Traefik] ‚îÄ‚îÄHTTP‚îÄ‚îÄ‚ñ∂ [Open WebUI:8080]
          (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è Docker-—Å–µ—Ç—å)
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. Traefik –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ—Ä—Ç 8080 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `openwebui`
2. Open WebUI –æ—Ç–¥–∞—ë—Ç React SPA –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è (JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, `WEBUI_SECRET_KEY`)
4. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –∏–∑ Ollama

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Open WebUI:**
```yaml
environment:
  - OLLAMA_BASE_URL=http://ollama:11434
  - WEBUI_AUTH=true
  - PIPELINES_URLS=http://pipelines:9099
  - LANGFUSE_HOST=http://langfuse:3000
```

---

### **–≠—Ç–∞–ø 3: –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è ‚Üí Pipelines (Filter)**

```
[Open WebUI] ‚îÄ‚îÄHTTP POST‚îÄ‚îÄ‚ñ∂ [Pipelines:9099/inlet]
              {model, messages, metadata}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –Ω–∞–∂–∏–º–∞–µ—Ç "Send"
2. Open WebUI —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:
   ```json
   {
     "model": "llama3.1:8b",
     "messages": [
       {"role": "system", "content": "..."},
       {"role": "user", "content": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?"}
     ],
     "metadata": {
       "chat_id": "abc123",
       "user_id": "user@email.com"
     }
   }
   ```
3. –ó–∞–ø—Ä–æ—Å –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ **Langfuse Filter Pipeline** (middleware)

**Pipelines: Langfuse Filter (inlet —Ñ—É–Ω–∫—Ü–∏—è):**
```python
async def inlet(self, body: dict, user: Optional[dict] = None) -> dict:
    # 1. –°–æ–∑–¥–∞–Ω–∏–µ trace –≤ Langfuse
    trace = self.langfuse.trace(
        name=f"chat:{chat_id}",
        input=body,
        user_id=user_email,
        tags=["open-webui"]
    )
    
    # 2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ generation (LLM –≤—ã–∑–æ–≤–∞)
    trace.generation(
        name="llm_response",
        model=model_id,
        input=messages,
    )
    
    return body  # –ó–∞–ø—Ä–æ—Å –ø—Ä–æ—Ö–æ–¥–∏—Ç –¥–∞–ª—å—à–µ
```

**–ó–∞—á–µ–º –Ω—É–∂–µ–Ω Pipelines:**
- ‚úÖ –¢—Ä–µ–π—Å–∏–Ω–≥ –≤—Å–µ—Ö LLM –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ Langfuse
- ‚úÖ –ü–æ–¥—Å—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤ (input/output)
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ (RAG, prompt injection)
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

---

### **–≠—Ç–∞–ø 4: Pipelines ‚Üí Ollama (LLM Inference)**

```
[Pipelines/Open WebUI] ‚îÄ‚îÄHTTP POST‚îÄ‚îÄ‚ñ∂ [Ollama:11434/api/chat]
                        Streaming response
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ó–∞–ø—Ä–æ—Å –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ Ollama API
2. Ollama –∑–∞–≥—Ä—É–∂–∞–µ—Ç –º–æ–¥–µ–ª—å –≤ –ø–∞–º—è—Ç—å (–µ—Å–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞)
3. –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è inference ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ —Ç–æ–∫–µ–Ω –∑–∞ —Ç–æ–∫–µ–Ω–æ–º
4. Streaming response: –∫–∞–∂–¥—ã–π —Ç–æ–∫–µ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É –ø–æ –º–µ—Ä–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Ollama:**
```yaml
environment:
  - OLLAMA_KEEP_ALIVE=24h    # –ú–æ–¥–µ–ª—å –æ—Å—Ç–∞—ë—Ç—Å—è –≤ RAM 24 —á–∞—Å–∞
  - OLLAMA_HOST=0.0.0.0      # –°–ª—É—à–∞–µ—Ç –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
volumes:
  - ollama-data:/root/.ollama  # –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –∫ Ollama API:**
```bash
curl http://ollama:11434/api/chat -d '{
  "model": "llama3.1:8b",
  "messages": [
    {"role": "user", "content": "–ü—Ä–∏–≤–µ—Ç!"}
  ],
  "stream": true
}'
```

**–û—Ç–≤–µ—Ç (streaming):**
```json
{"message":{"role":"assistant","content":"–ü—Ä"},"done":false}
{"message":{"role":"assistant","content":"–∏–≤"},"done":false}
{"message":{"role":"assistant","content":"–µ—Ç"},"done":false}
...
{"message":{"role":"assistant","content":"!"},"done":true,"eval_count":25}
```

---

### **–≠—Ç–∞–ø 5: –û—Ç–≤–µ—Ç Ollama ‚Üí Pipelines (Outlet)**

```
[Ollama] ‚îÄ‚îÄStreaming Response‚îÄ‚îÄ‚ñ∂ [Pipelines:9099/outlet]
                                  –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ trace
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `outlet` —Ñ—É–Ω–∫—Ü–∏—è
2. Langfuse Filter –∑–∞–≤–µ—Ä—à–∞–µ—Ç trace —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏

**Pipelines: Langfuse Filter (outlet —Ñ—É–Ω–∫—Ü–∏—è):**
```python
async def outlet(self, body: dict, user: Optional[dict] = None) -> dict:
    trace = self.chat_traces[chat_id]
    
    # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ usage (—Ç–æ–∫–µ–Ω—ã)
    usage = {
        "input": info.get("prompt_eval_count"),   # –í—Ö–æ–¥–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
        "output": info.get("eval_count"),          # –í—ã—Ö–æ–¥–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
        "unit": "TOKENS"
    }
    
    # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ generation —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
    trace.generation().end(
        name="llm_response",
        output=assistant_message,
        usage=usage
    )
    
    return body
```

---

### **–≠—Ç–∞–ø 6: –û—Ç–≤–µ—Ç ‚Üí Open WebUI ‚Üí –ö–ª–∏–µ–Ω—Ç**

```
[Pipelines] ‚îÄ‚îÄResponse‚îÄ‚îÄ‚ñ∂ [Open WebUI] ‚îÄ‚îÄStreaming SSE‚îÄ‚îÄ‚ñ∂ [Browser]
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. Open WebUI –ø–æ–ª—É—á–∞–µ—Ç –ø–æ—Ç–æ–∫ –æ—Ç–≤–µ—Ç–∞
2. –û—Ç–≤–µ—Ç —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É —á–µ—Ä–µ–∑ Server-Sent Events (SSE)
3. –í UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "–ø–µ—á–∞—Ç–∞—é—â–∏–π" —ç—Ñ—Ñ–µ–∫—Ç
4. –°–æ–æ–±—â–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω—É—é SQLite (Open WebUI data volume)

---

### **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ: –¢—Ä–µ–π—Å–∏–Ω–≥ ‚Üí Langfuse**

```
[Langfuse Filter] ‚îÄ‚îÄAsync HTTP‚îÄ‚îÄ‚ñ∂ [Langfuse:3000] ‚îÄ‚îÄ‚ñ∂ [PostgreSQL]
                                                   ‚îÄ‚îÄ‚ñ∂ [ClickHouse]
                                                   ‚îÄ‚îÄ‚ñ∂ [MinIO]
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ Langfuse:**
1. **Langfuse Server** –ø–æ–ª—É—á–∞–µ—Ç trace –¥–∞–Ω–Ω—ã–µ
2. **PostgreSQL** —Ö—Ä–∞–Ω–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (users, projects, traces metadata)
3. **ClickHouse** —Ö—Ä–∞–Ω–∏—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫—É (time-series –¥–∞–Ω–Ω—ã–µ, –∞–≥—Ä–µ–≥–∞—Ü–∏–∏)
4. **MinIO** —Ö—Ä–∞–Ω–∏—Ç –±–æ–ª—å—à–∏–µ –æ–±—ä–µ–∫—Ç—ã (–ø–æ–ª–Ω—ã–µ prompts/responses)
5. **Langfuse Worker** –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ–Ω–µ (–∞–≥—Ä–µ–≥–∞—Ü–∏—è, —Ä–µ—Ç–µ–Ω—à–Ω)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Langfuse:**
```yaml
# Langfuse Server
DATABASE_URL: postgresql://...@postgres/langfuse
CLICKHOUSE_URL: http://langfuse-clickhouse:8123
REDIS_CONNECTION_STRING: redis://redis:6379
LANGFUSE_S3_EVENT_UPLOAD_ENDPOINT: http://langfuse-minio:9000

# Langfuse Worker
- –§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫
- –û—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
```

---

## üß© –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤

### **1. Traefik (Reverse Proxy)**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –û–±—Ä–∞–∑ | `traefik:v3.6` |
| –ü–æ—Ä—Ç—ã | 80 (HTTP), 443 (HTTPS) |
| –†–æ–ª—å | Entry point, SSL termination, routing |

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–ø—É—Å–∫ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (Let's Encrypt)
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ Docker labels
- HTTP ‚Üí HTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ Host header

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```yaml
command:
  - --providers.docker=true
  - --providers.docker.exposedbydefault=false
  - --certificatesresolvers.letsencrypt.acme.httpchallenge.entrypoint=web
```

---

### **2. Open WebUI (Chat Interface)**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –û–±—Ä–∞–∑ | `ghcr.io/open-webui/open-webui:main` |
| –ü–æ—Ä—Ç | 8080 |
| –†–æ–ª—å | Web UI –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å LLM |

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ChatGPT-–ø–æ–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—è–º–∏ Ollama
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ pipelines (middleware)
- –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–æ–≤

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `ollama` ‚Äî –¥–ª—è inference
- `pipelines` ‚Äî –¥–ª—è —Ç—Ä–µ–π—Å–∏–Ω–≥–∞

---

### **3. Pipelines (Middleware)**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –û–±—Ä–∞–∑ | `ghcr.io/open-webui/pipelines:main` |
| –ü–æ—Ä—Ç | 9099 |
| –†–æ–ª—å | Request/Response filtering |

**–¢–µ–∫—É—â–∏–µ –ø–∞–π–ø–ª–∞–π–Ω—ã:**
- **Langfuse Filter Pipeline** ‚Äî —Ç—Ä–µ–π—Å–∏–Ω–≥ –≤—Å–µ—Ö LLM –≤—ã–∑–æ–≤–æ–≤

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
Request ‚Üí inlet() ‚Üí LLM ‚Üí outlet() ‚Üí Response
              ‚Üì                 ‚Üì
           Langfuse         Langfuse
          (start trace)   (end trace)
```

---

### **4. Ollama (LLM Engine)**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –û–±—Ä–∞–∑ | `ollama/ollama:latest` |
| –ü–æ—Ä—Ç | 11434 |
| –†–æ–ª—å | –õ–æ–∫–∞–ª—å–Ω—ã–π inference LLM |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ CPU-–≤–µ—Ä—Å–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SIMD –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (AVX2/AVX-512)
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ GPU –≤ 10-50x
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 16+ GB RAM –¥–ª—è –º–æ–¥–µ–ª–µ–π 7-8B

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—è–º–∏:**
```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏
docker exec ollama ollama pull llama3.1:8b

# –°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π
docker exec ollama ollama list

# –£–¥–∞–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
docker exec ollama ollama rm llama3.1:8b
```

---

### **5. PostgreSQL (Main Database)**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –û–±—Ä–∞–∑ | `supabase/postgres:15.6.1.117` |
| –ü–æ—Ä—Ç | 5432 |
| –†–æ–ª—å | –û—Å–Ω–æ–≤–Ω–∞—è ACID –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:**
- n8n (workflow, credentials, executions)
- Langfuse (metadata, traces, users)
- Supabase (authentication, storage metadata)
- LlamaIndex (vector store - pgvector)

**–°—Ö–µ–º—ã/–±–∞–∑—ã:**
```
postgres (DB)
‚îú‚îÄ‚îÄ n8n (schema)           # n8n –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ auth (schema)          # Supabase auth
‚îú‚îÄ‚îÄ public (schema)        # Supabase + LlamaIndex vectors
‚îî‚îÄ‚îÄ langfuse (DB)          # Langfuse metadata
```

---

### **6. Redis (Cache & Queues)**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –û–±—Ä–∞–∑ | `redis:7-alpine` |
| –ü–æ—Ä—Ç | 6379 |
| –†–æ–ª—å | –ö—ç—à + –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á |

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:**
- n8n Bull queues (workflow execution)
- Langfuse caching
- Session storage

---

### **7. Langfuse (LLM Observability)**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –û–±—Ä–∞–∑ | `langfuse/langfuse:latest` |
| –ü–æ—Ä—Ç | 3000 |
| –†–æ–ª—å | –¢—Ä–µ–π—Å–∏–Ω–≥ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ LLM |

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- **langfuse** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä (Next.js)
- **langfuse-worker** ‚Äî —Ñ–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **langfuse-clickhouse** ‚Äî time-series —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- **langfuse-minio** ‚Äî S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

**–ú–µ—Ç—Ä–∏–∫–∏:**
- Latency (–≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞)
- Token usage (input/output)
- Cost estimation
- Error rate
- User analytics

---

### **8. Supabase Stack (BaaS)**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–±—Ä–∞–∑ | –†–æ–ª—å |
|-----------|-------|------|
| supabase-kong | `kong:2.8.1` | API Gateway |
| supabase-auth | `supabase/gotrue:v2.151.0` | Authentication |
| supabase-rest | `postgrest/postgrest:v12.0.1` | REST API |
| supabase-storage | `supabase/storage-api:v1.0.6` | File Storage |
| supabase-studio | `supabase/studio:latest` | Admin UI |
| supabase-meta | `supabase/postgres-meta:v0.91.7` | DB metadata API |

**API Routes (—á–µ—Ä–µ–∑ Kong):**
```
/auth/v1/*    ‚Üí supabase-auth:9999
/rest/v1/*    ‚Üí supabase-rest:3000
/storage/v1/* ‚Üí supabase-storage:5000
/pg/*         ‚Üí supabase-meta:8080
/             ‚Üí supabase-studio:3000
```

---

### **9. n8n (Workflow Automation)**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –û–±—Ä–∞–∑ | `n8nio/n8n:latest` |
| –ü–æ—Ä—Ç | 5678 |
| –†–æ–ª—å | No-code –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è |

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- **n8n** (main) ‚Äî UI, API, webhook handler
- **n8n-worker** ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ workflow –≤ —Ñ–æ–Ω–µ

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
- Ollama (LLM –≤—ã–∑–æ–≤—ã)
- Supabase (Vector Store)
- PostgreSQL (—Ö—Ä–∞–Ω–µ–Ω–∏–µ)
- Redis (–æ—á–µ—Ä–µ–¥–∏)

---

### **10. LlamaIndex API (RAG Service)**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –û–±—Ä–∞–∑ | Custom (`llamaindex-api:latest`) |
| –ü–æ—Ä—Ç | 8000 |
| –†–æ–ª—å | RAG pipeline API |

**Endpoints:**
```
POST /index-document  # –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Ñ–∞–π–ª–∞
POST /index-text      # –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
POST /query           # RAG –ø–æ–∏—Å–∫
GET  /health          # Healthcheck
```

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç:**
- Ollama (`llama3.1:8b`) –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- Ollama (`nomic-embed-text`) –¥–ª—è embeddings
- PostgreSQL (pgvector) –¥–ª—è vector store

---

### **11. Docling (Document Parser)**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –û–±—Ä–∞–∑ | `ghcr.io/docling-project/docling-serve` |
| –ü–æ—Ä—Ç | 5001 |
| –†–æ–ª—å | –ü–∞—Ä—Å–∏–Ω–≥ PDF, DOCX, –∏ –¥—Ä. |

**–§—É–Ω–∫—Ü–∏–∏:**
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- OCR –¥–ª—è —Å–∫–∞–Ω–æ–≤
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ (tables, headers)

---

### **12. Monitoring Stack**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–±—Ä–∞–∑ | –ü–æ—Ä—Ç | –†–æ–ª—å |
|-----------|-------|------|------|
| prometheus | `prom/prometheus:v2.52.0` | 9090 | –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ |
| grafana | `grafana/grafana:11.0.0` | 3001 | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è |
| node-exporter | `prom/node-exporter:v1.9.0` | 9100 | –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ |

**Prometheus targets:**
```yaml
scrape_configs:
  - job_name: 'prometheus'
    targets: ['prometheus:9090']
  - job_name: 'n8n'
    targets: ['n8n:5678']
  - job_name: 'node'
    targets: ['node-exporter:9100']
```

---

## üîó –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### **–°–µ—Ç–µ–≤–∞—è —Ç–æ–ø–æ–ª–æ–≥–∏—è**

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –µ–¥–∏–Ω–æ–π Docker-—Å–µ—Ç–∏ `ai-network`:

```yaml
networks:
  ai-network:
    name: ai-network
    driver: bridge
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- DNS-based service discovery (`http://ollama:11434`)
- –ò–∑–æ–ª—è—Ü–∏—è –æ—Ç —Ö–æ—Å—Ç-—Å–µ—Ç–∏
- –ü—Ä–æ—Å—Ç–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

### **–î–∏–∞–≥—Ä–∞–º–º–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ Traefik  ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ               ‚îÇ               ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇOpen WebUI‚îÇ    ‚îÇ    n8n    ‚îÇ   ‚îÇ Langfuse  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                ‚îÇ               ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇPipelines‚îÇ    ‚îÇ  n8n-worker ‚îÇ  ‚îÇLF Worker  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                ‚îÇ               ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Ollama  ‚îÇ    ‚îÇ                           ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ      PostgreSQL           ‚îÇ
                   ‚îÇ      Redis                ‚îÇ
                   ‚îÇ      ClickHouse           ‚îÇ
                   ‚îÇ      MinIO                ‚îÇ
                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### **1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**

#### üî¥ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ**

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|----------|--------------|
| –°–µ–∫—Ä–µ—Ç—ã –≤ `.env` —Ñ–∞–π–ª–µ –≤–∏–¥–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker Secrets –∏–ª–∏ HashiCorp Vault |
| Traefik dashboard –¥–æ—Å—Ç—É–ø–µ–Ω –±–µ–∑ auth | –î–æ–±–∞–≤–∏—Ç—å BasicAuth middleware |
| Supabase Studio –Ω–∞ –ø–æ—Ä—Ç—É 3000 | –£–±—Ä–∞—Ç—å `ports: - "3000:3000"`, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Traefik |
| Redis –±–µ–∑ –ø–∞—Ä–æ–ª—è | –î–æ–±–∞–≤–∏—Ç—å `requirepass` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é |

**–ü—Ä–∏–º–µ—Ä: –ó–∞—â–∏—Ç–∞ Traefik Dashboard**
```yaml
labels:
  - "traefik.http.routers.traefik.middlewares=traefik-auth"
  - "traefik.http.middlewares.traefik-auth.basicauth.users=admin:$$apr1$$..."
```

**–ü—Ä–∏–º–µ—Ä: Redis —Å –ø–∞—Ä–æ–ª–µ–º**
```yaml
redis:
  command: redis-server --requirepass ${REDIS_PASSWORD}
```

#### üü° **–í–∞–∂–Ω—ã–µ**

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|----------|--------------|
| JWT —Å–µ–∫—Ä–µ—Ç—ã –ø–æ—Ö–æ–∂–∏ | –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ |
| Ollama –æ—Ç–∫—Ä—ã—Ç —á–µ—Ä–µ–∑ Traefik | –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å VPN/private network –¥–ª—è API |
| –ù–µ—Ç rate limiting | –î–æ–±–∞–≤–∏—Ç—å Traefik rate limit middleware |

---

### **2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

#### üîµ **–£–ª—É—á—à–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**

| –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|-------------------|--------------|
| –û–¥–∏–Ω PostgreSQL –¥–ª—è –≤—Å–µ—Ö | –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ separate instances (n8n, Langfuse, Supabase) |
| –ù–µ—Ç health checks –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ | –î–æ–±–∞–≤–∏—Ç—å healthcheck –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ |
| –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç backup automation | –î–æ–±–∞–≤–∏—Ç—å pg_dump cron job |

**–ü—Ä–∏–º–µ—Ä: Healthcheck –¥–ª—è Ollama**
```yaml
ollama:
  healthcheck:
    test: ["CMD", "curl", "-f", "http://localhost:11434/api/tags"]
    interval: 30s
    timeout: 10s
    retries: 3
```

#### üîµ **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ–∫—É—â–µ–µ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|-----------|---------|--------------|
| n8n workers | 1 | –£–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 2-3 –¥–ª—è –Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö workflow |
| Langfuse workers | 1 | –£–≤–µ–ª–∏—á–∏—Ç—å –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ |
| Ollama | 1 instance | –î–æ–±–∞–≤–∏—Ç—å load balancer –¥–ª—è multiple instances |

**–ü—Ä–∏–º–µ—Ä: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ n8n workers**
```yaml
n8n-worker:
  deploy:
    replicas: 3
```

---

### **3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤**

#### ‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è**

| –°–µ—Ä–≤–∏—Å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|--------|------------|-----------|
| **pgAdmin** | UI –¥–ª—è PostgreSQL | –í—ã—Å–æ–∫–∏–π |
| **Loki + Promtail** | –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ | –í—ã—Å–æ–∫–∏–π |
| **Uptime Kuma** | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ | –°—Ä–µ–¥–Ω–∏–π |
| **Nginx** | Static file serving | –ù–∏–∑–∫–∏–π |
| **Milvus/Qdrant** | Dedicated Vector DB | –°—Ä–µ–¥–Ω–∏–π |

**–ü—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Loki**
```yaml
loki:
  image: grafana/loki:2.9.0
  container_name: loki
  networks:
    - ai-network
  volumes:
    - loki-data:/loki
  command: -config.file=/etc/loki/local-config.yaml

promtail:
  image: grafana/promtail:2.9.0
  volumes:
    - /var/lib/docker/containers:/var/lib/docker/containers:ro
    - /var/run/docker.sock:/var/run/docker.sock
```

---

## ‚ö° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### **1. Ollama (LLM Inference)**

#### üöÄ **CPU-specific –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**

```yaml
ollama:
  environment:
    - OLLAMA_NUM_PARALLEL=4      # –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
    - OLLAMA_MAX_LOADED_MODELS=2  # –ú–∞–∫—Å –º–æ–¥–µ–ª–µ–π –≤ RAM
    - OLLAMA_KEEP_ALIVE=24h       # –î–µ—Ä–∂–∞—Ç—å –º–æ–¥–µ–ª—å –≤ RAM
  deploy:
    resources:
      limits:
        cpus: '8'
        memory: 16G
      reservations:
        cpus: '4'
        memory: 8G
```

#### üîß **–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö–æ—Å—Ç–∞**

```bash
# –£–≤–µ–ª–∏—á–∏—Ç—å huge pages –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
echo 'vm.nr_hugepages=1024' >> /etc/sysctl.conf
sysctl -p

# –û—Ç–∫–ª—é—á–∏—Ç—å swap –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
swapoff -a
```

#### üìä **–í—ã–±–æ—Ä –º–æ–¥–µ–ª–µ–π –¥–ª—è CPU**

| –ú–æ–¥–µ–ª—å | –†–∞–∑–º–µ—Ä | RAM —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|--------|--------|----------------|--------------|
| llama3.2:1b | 1B | 2GB | ‚úÖ –ë—ã—Å—Ç—Ä–∞—è, –±–∞–∑–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ |
| llama3.2:3b | 3B | 4GB | ‚úÖ –ë–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç—å/–∫–∞—á–µ—Å—Ç–≤–æ |
| llama3.1:8b | 8B | 8GB | ‚ö†Ô∏è –ú–µ–¥–ª–µ–Ω–Ω–∞—è –Ω–∞ CPU |
| mistral:7b | 7B | 8GB | ‚ö†Ô∏è –ú–µ–¥–ª–µ–Ω–Ω–∞—è –Ω–∞ CPU |

---

### **2. PostgreSQL**

#### üîß **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

```yaml
postgres:
  command:
    - postgres
    - -c
    - shared_buffers=2GB
    - -c
    - effective_cache_size=6GB
    - -c
    - work_mem=256MB
    - -c
    - maintenance_work_mem=512MB
    - -c
    - random_page_cost=1.1
    - -c
    - effective_io_concurrency=200
```

#### üìà **–ò–Ω–¥–µ–∫—Å—ã –¥–ª—è pgvector**

```sql
-- –î–ª—è LlamaIndex vector store
CREATE INDEX ON llamaindex_vectors 
USING ivfflat (embedding vector_cosine_ops)
WITH (lists = 100);

-- –î–ª—è Supabase documents
CREATE INDEX ON documents 
USING ivfflat (embedding vector_cosine_ops)
WITH (lists = 100);
```

---

### **3. Redis**

#### üîß **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**

```yaml
redis:
  command:
    - redis-server
    - --maxmemory 1gb
    - --maxmemory-policy allkeys-lru
    - --save ""  # –û—Ç–∫–ª—é—á–∏—Ç—å RDB —Å–Ω–∞–ø—à–æ—Ç—ã –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
    - --appendonly no
```

---

### **4. Traefik**

#### üîß **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–∂–∞—Ç–∏–µ**

```yaml
# traefik/config/middlewares.yml
http:
  middlewares:
    compress:
      compress: {}
    rate-limit:
      rateLimit:
        average: 100
        burst: 50
```

```yaml
# –í docker-compose
labels:
  - "traefik.http.routers.openwebui.middlewares=compress@file,rate-limit@file"
```

---

### **5. Docker –æ–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**

#### üîß **–õ–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤**

```yaml
# –î–æ–±–∞–≤–∏—Ç—å –∫–æ –≤—Å–µ–º —Å–µ—Ä–≤–∏—Å–∞–º
deploy:
  resources:
    limits:
      memory: 2G
    reservations:
      memory: 512M
```

#### üì¶ **Logging**

```yaml
# –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤
logging:
  driver: "json-file"
  options:
    max-size: "10m"
    max-file: "3"
```

---

### **6. Prometheus & Grafana**

#### üìä **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ Ollama**

```yaml
# prometheus.yml
scrape_configs:
  - job_name: 'ollama'
    static_configs:
      - targets: ['ollama:11434']
    metrics_path: /metrics  # –ï—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
```

#### üìà **–î–æ–±–∞–≤–∏—Ç—å –∞–ª–µ—Ä—Ç—ã**

```yaml
# –°–æ–∑–¥–∞—Ç—å alert rules
groups:
  - name: ai-stack
    rules:
      - alert: HighMemoryUsage
        expr: node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes < 0.1
        for: 5m
        labels:
          severity: warning
```

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- [ ] –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ Docker Secrets –∏–ª–∏ Vault
- [ ] Traefik Dashboard –∑–∞—â–∏—â—ë–Ω
- [ ] Redis —Å –ø–∞—Ä–æ–ª–µ–º
- [ ] Rate limiting –≤–∫–ª—é—á—ë–Ω
- [ ] Cloudflare WAF –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å**
- [ ] Healthchecks –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã PostgreSQL
- [ ] Log rotation –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ Grafana

### **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- [ ] Resource limits —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] PostgreSQL –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
- [ ] Ollama —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é

### **Observability**
- [ ] Langfuse —Ç—Ä–µ–π—Å–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏
- [ ] Grafana –¥–∞—à–±–æ—Ä–¥—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] Alerting –Ω–∞—Å—Ç—Ä–æ–µ–Ω

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Open WebUI Docs](https://docs.openwebui.com/)
- [Ollama API Reference](https://github.com/ollama/ollama/blob/main/docs/api.md)
- [Langfuse Docs](https://langfuse.com/docs)
- [n8n Docs](https://docs.n8n.io/)
- [Traefik Docs](https://doc.traefik.io/traefik/)

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ docker-compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π.*
